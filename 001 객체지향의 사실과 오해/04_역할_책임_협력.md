# 4. 역할, 책임, 협력(20220310)

------

### 우리 모두를 합친 것보다 더 현명한 사람은 없다. - 켄 블랜차드

------

- 중요한 것은 개별 객체가 아니라 객체들 사이에 이뤄지는 협력이다. 객체지향 설계의 전체적인 품질을 결정하는 것은 개별 객체의 품질이 아니라 여러 객체들이 모여 이뤄내는 협력의 품질이다.

------

### 협력

- 1. 왕의 요청을 받은 토끼는 모자장수에게 증인석으로 입장할 것을 요청한다.
  1. 모자장수는 증인석에 입장함으로써 토끼의 요청에 응답한다.
  1. 모자장수의 입장은 왕이 토끼에게 요청했던 증인 호출에 대한 응답이기도 하다.
  1. 이제 왕은 모자 장수에게 증언할 것을 요청한다.
  1. 모자장수는 자신이 알고 있는 내용을 증언함으로써 왕의 요청에 응답한다.
- 협력 안에서 객체는 다른 객체로부터 요청이 전송됐을 경우에만 자신에게 주어진 책임을 수행한다.
- 하얀 토끼가 모자 장수를 증인석으로 불러들이는 때는 왕으로부터 목격자를 부르라는 요청을 받았을 때뿐이다.
- 모자장수가 자신의 책임을 완수하기 위해 증언하는 이유는 왕으로부터 요청이 수신됐기 대문이다.
- 메세지전송: 결국 한 객체가 다른 객체에게 전송한 요청은 그 요청을 수신한 객체의 책임이 수행되게 한다. 이처럼 객체가 다른 객체에게 주어진 책임을 수행하도록 요청을 보내는 것
- 1. 판사
  2. 토끼
  3. 증인
  4. 이렇게 축약함
- 위의 역할의 개념을 사용하면 유사한 협력을 추상화해서 인지 과부하를 줄일 수 있따. 또한 다양한 객체들이 협력에 참여할 숭 ㅣㅆ기 때문에 협력이 좀 더 유연해지면 다양한 객체들이 동일한 협력에 참여할 수 있기 때문에 재사용성이 높아진다. 역할은 객체지향 설계의 단순성, 유연성, 재사용성을 뒷받침하는 개념이다. 

------

### 객체의 모양을 결정하는 협력

- 올바른 객체를 설계하기 위해서는 먼저 견고하고 깔끔한 협력을 설계해야 한다.

------

### 객체지향 설계 기법

- 책임-주도설계(2003, 레베카 워프스브록)

  - 객체지향 설계란 애플리케이션의 기능을 구현하기 위한 협력관계를 고안하고 협력에 필요한 역할과 책임을 식별한 후 이를 수행할 수 있는 적절한 객체를 식별해 나가는 과정이다.
  - 올바른 책임을 올바른 객체에게 할당하는 것이다.
  - **1. 시스템이 사용자에게 제공해야 하는 기능인 시스템 책임을 파악한다.**
  - **2. 시스템 책임을 더 작은 책임으로 분할한다.**
  - **3. 분할된 책임을 수행할 수 잇는 적절한 객체 또는 역할을 찾아 책임을 할당한다.**
  - **4. 객체가 책임을 수행하는 중에 다른 객체의 도움이 필요한 경우 이를 책임질 적절한 객체 또는 역할을 찾는다.**
  - **5. 해당 객체 또는 역할에게 책임을 할당함으로써 두 객체가 협력하게 한다.**

- 디자인 패턴

  

- 테스트-주도 개발

  - 테스트-주도 개발은 객체지향에 대한 깊이 있는 지식을 요구한다. 테스트를 작성하기 위해 객체의 메서드를 호출하고 반환값을 검증하는 것은 순간적으로 객체가 수행해야 하는 책임에 관해 생각한 것이다.

    